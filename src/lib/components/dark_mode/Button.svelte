<script>
	import { onMount } from 'svelte';
    import { get } from 'svelte/store'
    import { theme } from '$lib/components/dark_mode/DarkModeStore'

	export let width = 20,
		height = 20;

	let mode = 0; //0 dark, 1 light

	let colorWhite = '#F2F2F4',
		colorDark = '#56545A';

	var left = colorWhite,
		right = colorDark;

	const toggle = (newMode = null) => {
		// assign new mode if not null
		if (newMode != null) {
			mode = newMode;
		} else {
			mode = !mode;
		}

        // set html root dataset theme
        let w = window;
        if(!w) return;
        let h = w.document.querySelector('html');
        h.dataset.theme = (mode == 0) ? 'dark' : 'light';

        //set local storage
        theme.set({theme : ((mode == 0) ? 'dark' : 'light') })
	};

	/**
	 *     HOOKS
	 */
	onMount(() => {
        let storageTheme = get(theme).theme;
        storageTheme = storageTheme == 'dark' ? 0 : 1;
        toggle(storageTheme);
    });
</script>

<button
	class="toggle"
	on:click={(ev) => {
		ev.preventDefault();
		toggle();
	}}
>
<svg width={width} height={height} viewBox="0 0 712 713" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M151.6 356.333C151.6 410.453 173.1 462.36 211.365 500.627C249.636 538.892 301.543 560.392 355.659 560.392C409.775 560.392 461.685 538.892 499.952 500.627C538.217 462.356 559.717 410.449 559.717 356.333C559.717 302.217 538.217 250.307 499.952 212.04C461.681 173.775 409.775 152.275 355.659 152.275C301.544 152.295 249.648 173.801 211.392 212.067C173.127 250.327 151.621 302.223 151.6 356.333V356.333ZM357.6 205.733C412.095 205.733 462.455 234.812 489.704 282.009C516.955 329.203 516.955 387.353 489.704 434.556C462.453 481.753 412.095 510.827 357.6 510.827V205.733ZM370.59 110.384V18.8426C370.902 14.103 369.241 9.44678 365.991 5.97812C362.746 2.50932 358.204 0.540649 353.454 0.540649C348.704 0.540649 344.163 2.50945 340.918 5.97812C337.673 9.44692 336.006 14.1032 336.319 18.8426V110.384C336.913 119.41 344.407 126.425 353.455 126.425C362.502 126.425 369.996 119.41 370.591 110.384H370.59ZM604.816 128.452V128.457C611.061 121.681 610.847 111.187 604.332 104.671C597.821 98.1549 587.327 97.9413 580.551 104.186L516.113 168.926C509.868 175.697 510.082 186.191 516.598 192.707C523.113 199.223 533.608 199.437 540.379 193.192L604.816 128.452ZM601.608 371.265H693.149C697.889 371.578 702.545 369.916 706.014 366.666C709.483 363.422 711.451 358.88 711.451 354.13C711.451 349.38 709.482 344.838 706.014 341.594C702.545 338.349 697.889 336.682 693.149 336.995H601.608C592.582 337.588 585.567 345.083 585.567 354.131C585.567 363.178 592.582 370.672 601.608 371.267V371.265ZM518.801 516.785C515.567 519.994 513.749 524.363 513.749 528.921C513.749 533.473 515.567 537.843 518.801 541.051L583.536 605.786V605.791C590.26 612.442 601.083 612.442 607.807 605.791C611.036 602.577 612.854 598.213 612.854 593.655C612.854 589.098 611.036 584.734 607.807 581.52L543.067 516.785C539.858 513.551 535.489 511.733 530.936 511.733C526.379 511.733 522.009 513.551 518.801 516.785L518.801 516.785ZM340.721 602.28V693.821C340.409 698.561 342.07 703.217 345.32 706.686C348.565 710.155 353.107 712.123 357.857 712.123C362.607 712.123 367.148 710.155 370.393 706.686C373.638 703.217 375.305 698.561 374.992 693.821V602.28C374.398 593.254 366.903 586.239 357.856 586.239C348.809 586.239 341.315 593.254 340.72 602.28H340.721ZM106.188 584.207C101.308 589.129 99.8651 596.498 102.521 602.9C105.183 609.296 111.433 613.473 118.36 613.478C122.902 613.499 127.256 611.697 130.459 608.478L195.194 543.743V543.738C201.438 536.967 201.225 526.473 194.709 519.957C188.194 513.441 177.699 513.228 170.928 519.473L106.188 584.207ZM0.985321 358.273C1.02699 367.726 8.70412 375.372 18.1573 375.372H109.699C118.725 374.773 125.74 367.278 125.74 358.236C125.74 349.189 118.724 341.695 109.699 341.096H18.1573C13.6052 341.096 9.23545 342.909 6.01665 346.127C2.79265 349.351 0.985453 353.716 0.985453 358.273L0.985321 358.273ZM192.505 195.873C195.74 192.665 197.557 188.295 197.557 183.738C197.557 179.186 195.74 174.816 192.505 171.608L127.771 106.873V106.868C120.995 100.628 110.5 100.842 103.984 107.352C97.4684 113.868 97.2548 124.363 103.5 131.139L168.234 195.873H168.239C174.958 202.524 185.781 202.524 192.505 195.873L192.505 195.873Z"
    fill="var(--h1-color)"/>
    </svg>
    
</button>

<style>
	button.toggle {
		width: auto;
		display: flex;
		padding: 20px;
        /* position: fixed; */
        /* bottom: var(--spacing); */
        /* right: var(--spacing); */
        padding:10px;
        border-radius: 10em;
        background-color: transparent !important;
        border: none !important;
	}
</style>
